"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[448],{448:(F,g,p)=>{p.r(g),p.d(g,{PhotosPageModule:()=>C});var v=p(2881),E=p(4341),u=p(691),y=p(5207),d=p(467),f=p(5083),h=function(o){return o.Prompt="PROMPT",o.Camera="CAMERA",o.Photos="PHOTOS",o}(h||{}),P=function(o){return o.Rear="REAR",o.Front="FRONT",o}(P||{}),b=function(o){return o.Uri="uri",o.Base64="base64",o.DataUrl="dataUrl",o}(b||{});class w extends f.E_{getPhoto(e){var r=this;return(0,d.A)(function*(){return new Promise(function(){var t=(0,d.A)(function*(n,a){if(e.webUseInput||e.source===h.Photos)r.fileInputExperience(e,n,a);else if(e.source===h.Prompt){let s=document.querySelector("pwa-action-sheet");s||(s=document.createElement("pwa-action-sheet"),document.body.appendChild(s)),s.header=e.promptLabelHeader||"Photo",s.cancelable=!1,s.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],s.addEventListener("onSelection",function(){var c=(0,d.A)(function*(l){0===l.detail?r.fileInputExperience(e,n,a):r.cameraExperience(e,n,a)});return function(l){return c.apply(this,arguments)}}())}else r.cameraExperience(e,n,a)});return function(n,a){return t.apply(this,arguments)}}())})()}pickImages(e){var r=this;return(0,d.A)(function*(){return new Promise(function(){var t=(0,d.A)(function*(n,a){r.multipleFileInputExperience(n,a)});return function(n,a){return t.apply(this,arguments)}}())})()}cameraExperience(e,r,t){var n=this;return(0,d.A)(function*(){if(customElements.get("pwa-camera-modal")){const a=document.createElement("pwa-camera-modal");a.facingMode=e.direction===P.Front?"user":"environment",document.body.appendChild(a);try{yield a.componentOnReady(),a.addEventListener("onPhoto",function(){var s=(0,d.A)(function*(c){const l=c.detail;null===l?t(new f.I9("User cancelled photos app")):l instanceof Error?t(l):r(yield n._getCameraPhoto(l,e)),a.dismiss(),document.body.removeChild(a)});return function(c){return s.apply(this,arguments)}}()),a.present()}catch{n.fileInputExperience(e,r,t)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),n.fileInputExperience(e,r,t)})()}fileInputExperience(e,r,t){let n=document.querySelector("#_capacitor-camera-input");const a=()=>{var s;null===(s=n.parentNode)||void 0===s||s.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input",n.type="file",n.hidden=!0,document.body.appendChild(n),n.addEventListener("change",s=>{const c=n.files[0];let l="jpeg";if("image/png"===c.type?l="png":"image/gif"===c.type&&(l="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const m=new FileReader;m.addEventListener("load",()=>{if("dataUrl"===e.resultType)r({dataUrl:m.result,format:l});else if("base64"===e.resultType){const x=m.result.split(",")[1];r({base64String:x,format:l})}a()}),m.readAsDataURL(c)}else r({webPath:URL.createObjectURL(c),format:l}),a()}),n.addEventListener("cancel",s=>{t(new f.I9("User cancelled photos app")),a()})),n.accept="image/*",n.capture=!0,e.source===h.Photos||e.source===h.Prompt?n.removeAttribute("capture"):e.direction===P.Front?n.capture="user":e.direction===P.Rear&&(n.capture="environment"),n.click()}multipleFileInputExperience(e,r){let t=document.querySelector("#_capacitor-camera-input-multiple");const n=()=>{var a;null===(a=t.parentNode)||void 0===a||a.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input-multiple",t.type="file",t.hidden=!0,t.multiple=!0,document.body.appendChild(t),t.addEventListener("change",a=>{const s=[];for(let c=0;c<t.files.length;c++){const l=t.files[c];let m="jpeg";"image/png"===l.type?m="png":"image/gif"===l.type&&(m="gif"),s.push({webPath:URL.createObjectURL(l),format:m})}e({photos:s}),n()}),t.addEventListener("cancel",a=>{r(new f.I9("User cancelled photos app")),n()})),t.accept="image/*",t.click()}_getCameraPhoto(e,r){return new Promise((t,n)=>{const a=new FileReader,s=e.type.split("/")[1];"uri"===r.resultType?t({webPath:URL.createObjectURL(e),format:s,saved:!1}):(a.readAsDataURL(e),a.onloadend=()=>{const c=a.result;t("dataUrl"===r.resultType?{dataUrl:c,format:s,saved:!1}:{base64String:c.split(",")[1],format:s,saved:!1})},a.onerror=c=>{n(c)})})}checkPermissions(){var e=this;return(0,d.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw e.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw e.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var e=this;return(0,d.A)(function*(){throw e.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var e=this;return(0,d.A)(function*(){throw e.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var e=this;return(0,d.A)(function*(){throw e.unavailable("Not implemented on web.")})()}}new w;const _=(0,f.F3)("Camera",{web:()=>new w});var U=p(7832),i=p(1360);function L(o,e){if(1&o){const r=i.RV6();i.j41(0,"ion-col",4)(1,"ion-card",1),i.bIt("click",function(){const n=i.eBV(r).index,a=i.XpG();return i.Njj(a.viewPhoto(n))}),i.nrm(2,"img",5),i.k0s()()}if(2&o){const r=e.$implicit;i.R7$(2),i.Y8G("src",r.webviewPath,i.B4B)}}const R=[{path:"",component:(()=>{var o;class e{ngOnInit(){}constructor(t){this.modalCtrl=t,this.photos=[]}addPhoto(){var t=this;return(0,d.A)(function*(){const n=yield _.getPhoto({resultType:b.Uri,source:h.Camera,quality:90});t.photos.push({webviewPath:n.webPath})})()}viewPhoto(t){var n=this;return(0,d.A)(function*(){yield(yield n.modalCtrl.create({component:U.q,componentProps:{photo:n.photos[t]}})).present()})()}}return(o=e).\u0275fac=function(t){return new(t||o)(i.rXU(u.W3))},o.\u0275cmp=i.VBU({type:o,selectors:[["app-photos"]],standalone:!1,decls:11,vars:1,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","camera"],["size","6",4,"ngFor","ngForOf"],["size","6"],[3,"src"]],template:function(t,n){1&t&&(i.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i.EFF(3,"My Album"),i.k0s(),i.j41(4,"ion-buttons",0)(5,"ion-button",1),i.bIt("click",function(){return n.addPhoto()}),i.nrm(6,"ion-icon",2),i.k0s()()()(),i.j41(7,"ion-content")(8,"ion-grid")(9,"ion-row"),i.DNE(10,L,3,1,"ion-col",3),i.k0s()()()),2&t&&(i.R7$(10),i.Y8G("ngForOf",n.photos))},dependencies:[v.Sq,u.Jm,u.QW,u.b_,u.hU,u.W9,u.lO,u.eU,u.iq,u.ln,u.BC,u.ai],encapsulation:2}),e})()}];let A=(()=>{var o;class e{}return(o=e).\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.$C({type:o}),o.\u0275inj=i.G2t({imports:[y.iI.forChild(R),y.iI]}),e})(),C=(()=>{var o;class e{}return(o=e).\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.$C({type:o}),o.\u0275inj=i.G2t({imports:[v.MD,E.YN,u.bv,A]}),e})()}}]);