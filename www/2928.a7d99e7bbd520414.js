(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2928],{2928:(W,b,A)=>{"use strict";A.d(b,{m:()=>mn});var d=A(467);class L extends Error{constructor(r,e="FunctionsError",t){super(r),this.name=e,this.context=t}}class x extends L{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class f extends L{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class g extends L{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var p=function(s){return s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2",s}(p||{});class w{constructor(r,{headers:e={},customFetch:t,region:n=p.Any}={}){this.url=r,this.headers=e,this.region=n,this.fetch=(s=>{let r;return r=s||(typeof fetch>"u"?(...e)=>Promise.resolve().then(A.bind(A,5286)).then(({default:t})=>t(...e)):fetch),(...e)=>r(...e)})(t)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r,e={}){var t;return function(s,r,e,t){return new(e||(e=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function n(i){return i instanceof e?i:new e(function(o){o(i)})}(u.value).then(a,l)}c((t=t.apply(s,r||[])).next())})}(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=e;let a={},{region:l}=e;l||(l=this.region);const c=new URL(`${this.url}/${r}`);let u;l&&"any"!==l&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):"string"==typeof o?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:u}).catch(O=>{throw new x(O)}),_=h.headers.get("x-relay-error");if(_&&"true"===_)throw new f(h);if(!h.ok)throw new g(h);let v,y=(null!==(t=h.headers.get("Content-Type"))&&void 0!==t?t:"text/plain").split(";")[0].trim();return v="application/json"===y?yield h.json():"application/octet-stream"===y?yield h.blob():"text/event-stream"===y?h:"multipart/form-data"===y?yield h.formData():yield h.text(),{data:v,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof g||n instanceof f?n.context:void 0}}})}}var $=A(4060);const{PostgrestClient:P}=$,Ee=function G(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var Oe=function(s){return s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed",s}(Oe||{}),z=function(s){return s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving",s}(z||{}),ee=function(s){return s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token",s}(ee||{}),ht=function(s){return s.websocket="websocket",s}(ht||{}),ve=function(s){return s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed",s}(ve||{});class Nt{constructor(){this.HEADER_LENGTH=1}decode(r,e){return r.constructor===ArrayBuffer?e(this._binaryDecode(r)):e("string"==typeof r?JSON.parse(r):{})}_binaryDecode(r){const e=new DataView(r),t=new TextDecoder;return this._decodeBroadcast(r,e,t)}_decodeBroadcast(r,e,t){const n=e.getUint8(1),i=e.getUint8(2);let o=this.HEADER_LENGTH+2;const a=t.decode(r.slice(o,o+n));o+=n;const l=t.decode(r.slice(o,o+i));return o+=i,{ref:null,topic:a,event:l,payload:JSON.parse(t.decode(r.slice(o,r.byteLength)))}}}class ft{constructor(r,e){this.callback=r,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var C=function(s){return s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange",s}(C||{});const gt=(s,r,e={})=>{var t;const n=null!==(t=e.skipTypes)&&void 0!==t?t:[];return Object.keys(r).reduce((i,o)=>(i[o]=Mt(o,s,r,n),i),{})},Mt=(s,r,e,t)=>{const n=r.find(a=>a.name===s),i=null==n?void 0:n.type,o=e[s];return i&&!t.includes(i)?pt(i,o):Be(o)},pt=(s,r)=>{if("_"===s.charAt(0)){const e=s.slice(1,s.length);return Wt(r,e)}switch(s){case C.bool:return qt(r);case C.float4:case C.float8:case C.int2:case C.int4:case C.int8:case C.numeric:case C.oid:return Ft(r);case C.json:case C.jsonb:return Kt(r);case C.timestamp:return Gt(r);default:return Be(r)}},Be=s=>s,qt=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Ft=s=>{if("string"==typeof s){const r=parseFloat(s);if(!Number.isNaN(r))return r}return s},Kt=s=>{if("string"==typeof s)try{return JSON.parse(s)}catch(r){return console.log(`JSON parse error: ${r}`),s}return s},Wt=(s,r)=>{if("string"!=typeof s)return s;const e=s.length-1;if("{"===s[0]&&"}"===s[e]){let i;const o=s.slice(1,e);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>pt(r,a))}return s},Gt=s=>"string"==typeof s?s.replace(" ","T"):s,_t=s=>{let r=s;return r=r.replace(/^ws/i,"http"),r=r.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),r.replace(/\/+$/,"")};class Ne{constructor(r,e,t={},n=1e4){this.channel=r,this.event=e,this.payload=t,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,e){var t;return this._hasReceived(r)&&e(null===(t=this.receivedResp)||void 0===t?void 0:t.response),this.recHooks.push({status:r,callback:e}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(r,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:e}){this.recHooks.filter(t=>t.status===r).forEach(t=>t.callback(e))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}class Te{constructor(r,e){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const t=(null==e?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Te.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Te.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(t.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Te.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,e,t,n){const i=this.cloneDeep(r),o=this.transformState(e),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const _=u.map(S=>S.presence_ref),y=h.map(S=>S.presence_ref),v=u.filter(S=>y.indexOf(S.presence_ref)<0),O=h.filter(S=>_.indexOf(S.presence_ref)<0);v.length>0&&(a[c]=v),O.length>0&&(l[c]=O)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},t,n)}static syncDiff(r,e,t,n){const{joins:i,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return t||(t=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=r[a])&&void 0!==c?c:[];if(r[a]=this.cloneDeep(l),u.length>0){const h=r[a].map(y=>y.presence_ref),_=u.filter(y=>h.indexOf(y.presence_ref)<0);r[a].unshift(..._)}t(a,u,l)}),this.map(o,(a,l)=>{let c=r[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),r[a]=c,n(a,c,l),0===c.length&&delete r[a]}),r}static map(r,e){return Object.getOwnPropertyNames(r).map(t=>e(t,r[t]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((e,t)=>{const n=r[t];return e[t]="metas"in n?n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n,e},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var re=function(s){return s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR",s}(re||{});class Me{constructor(r,e={config:{}},t){this.topic=r,this.params=e,this.socket=t,this.bindings={},this.state=z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Ne(this,ee.join,this.params,this.timeout),this.rejoinTimer=new ft(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=z.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ee.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Te(this),this.broadcastEndpointURL=_t(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(r,e=this.timeout){var n,i,t=this;if(this.socket.isConnected()||this.socket.connect(),this.state==z.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params;this._onError(h=>null==r?void 0:r(re.CHANNEL_ERROR,h)),this._onClose(()=>null==r?void 0:r(re.CLOSED));const c={},u={broadcast:o,presence:a,postgres_changes:null!==(i=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(h=>h.filter))&&void 0!==i?i:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",function(){var h=(0,d.A)(function*({postgres_changes:_}){var y;if(t.socket.setAuth(),void 0!==_){const v=t.bindings.postgres_changes,O=null!==(y=null==v?void 0:v.length)&&void 0!==y?y:0,S=[];for(let B=0;B<O;B++){const U=v[B],{filter:{event:F,schema:J,table:k,filter:M}}=U,Y=_&&_[B];if(!Y||Y.event!==F||Y.schema!==J||Y.table!==k||Y.filter!==M)return t.unsubscribe(),t.state=z.errored,void(null==r||r(re.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));S.push(Object.assign(Object.assign({},U),{id:Y.id}))}return t.bindings.postgres_changes=S,void(r&&r(re.SUBSCRIBED))}null==r||r(re.SUBSCRIBED)});return function(_){return h.apply(this,arguments)}}()).receive("error",h=>{this.state=z.errored,null==r||r(re.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{null==r||r(re.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){var e=this;return(0,d.A)(function*(t,n={}){return yield e.send({type:"presence",event:"track",payload:t},n.timeout||e.timeout)}).apply(this,arguments)}untrack(){var r=this;return(0,d.A)(function*(e={}){return yield r.send({type:"presence",event:"untrack"},e)}).apply(this,arguments)}on(r,e,t){return this._on(r,e,t)}send(r){var e=this;return(0,d.A)(function*(t,n={}){var i,o;if(e._canPush()||"broadcast"!==t.type)return new Promise(a=>{var l,c,u;const h=e._push(t.type,t,n.timeout||e.timeout);"broadcast"===t.type&&!(null!==(u=null===(c=null===(l=e.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))});{const{event:a,payload:l}=t,u={method:"POST",headers:{Authorization:e.socket.accessTokenValue?`Bearer ${e.socket.accessTokenValue}`:"",apikey:e.socket.apiKey?e.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:e.subTopic,event:a,payload:l,private:e.private}]})};try{const h=yield e._fetchWithTimeout(e.broadcastEndpointURL,u,null!==(i=n.timeout)&&void 0!==i?i:e.timeout);return yield null===(o=h.body)||void 0===o?void 0:o.cancel(),h.ok?"ok":"error"}catch(h){return"AbortError"===h.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=z.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ee.close,"leave",this._joinRef())};this.joinPush.destroy();let t=null;return new Promise(n=>{t=new Ne(this,ee.leave,{},r),t.receive("ok",()=>{e(),n("ok")}).receive("timeout",()=>{e(),n("timed out")}).receive("error",()=>{n("error")}),t.send(),this._canPush()||t.trigger("ok",{})}).finally(()=>{null==t||t.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}_fetchWithTimeout(r,e,t){var n=this;return(0,d.A)(function*(){const i=new AbortController,o=setTimeout(()=>i.abort(),t),a=yield n.socket.fetch(r,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),a})()}_push(r,e,t=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ne(this,r,e,t);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(r,e,t){return e}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,e,t){var n,i;const o=r.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ee;if(t&&[a,l,c,u].indexOf(o)>=0&&t!==this._joinRef())return;let _=this._onMessage(o,e,t);if(e&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(y=>{var v,O,S;return"*"===(null===(v=y.filter)||void 0===v?void 0:v.event)||(null===(S=null===(O=y.filter)||void 0===O?void 0:O.event)||void 0===S?void 0:S.toLocaleLowerCase())===o}).map(y=>y.callback(_,t)):null===(i=this.bindings[o])||void 0===i||i.filter(y=>{var v,O,S,B,U,F;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in y){const J=y.id,k=null===(v=y.filter)||void 0===v?void 0:v.event;return J&&(null===(O=e.ids)||void 0===O?void 0:O.includes(J))&&("*"===k||(null==k?void 0:k.toLocaleLowerCase())===(null===(S=e.data)||void 0===S?void 0:S.type.toLocaleLowerCase()))}{const J=null===(U=null===(B=null==y?void 0:y.filter)||void 0===B?void 0:B.event)||void 0===U?void 0:U.toLocaleLowerCase();return"*"===J||J===(null===(F=null==e?void 0:e.event)||void 0===F?void 0:F.toLocaleLowerCase())}}return y.type.toLocaleLowerCase()===o}).map(y=>{if("object"==typeof _&&"ids"in _){const v=_.data,{schema:O,table:S,commit_timestamp:B,type:U,errors:F}=v;_=Object.assign(Object.assign({},{schema:O,table:S,commit_timestamp:B,eventType:U,new:{},old:{},errors:F}),this._getPayloadRecords(v))}y.callback(_,t)})}_isClosed(){return this.state===z.closed}_isJoined(){return this.state===z.joined}_isJoining(){return this.state===z.joining}_isLeaving(){return this.state===z.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,e,t){const n=r.toLocaleLowerCase(),i={type:n,filter:e,callback:t};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(r,e){const t=r.toLocaleLowerCase();return this.bindings[t]=this.bindings[t].filter(n=>{var i;return!((null===(i=n.type)||void 0===i?void 0:i.toLocaleLowerCase())===t&&Me.isEqual(n.filter,e))}),this}static isEqual(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(ee.close,{},r)}_onError(r){this._on(ee.error,{},e=>r(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=z.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const e={new:{},old:{}};return("INSERT"===r.type||"UPDATE"===r.type)&&(e.new=gt(r.columns,r.record)),("UPDATE"===r.type||"DELETE"===r.type)&&(e.old=gt(r.columns,r.old_record)),e}}const vt=()=>{};class Qt{constructor(r,e){var n,t=this;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vt,this.ref=0,this.logger=vt,this.conn=null,this.sendBuffer=[],this.serializer=new Nt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let a;return a=o||(typeof fetch>"u"?(...l)=>Promise.resolve().then(A.bind(A,5286)).then(({default:c})=>c(...l)):fetch),(...l)=>a(...l)},this.endPoint=`${r}/${ht.websocket}`,this.httpEndpoint=_t(r),this.transport=null!=e&&e.transport?e.transport:null,null!=e&&e.params&&(this.params=e.params),null!=e&&e.timeout&&(this.timeout=e.timeout),null!=e&&e.logger&&(this.logger=e.logger),(null!=e&&e.logLevel||null!=e&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),null!=e&&e.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);const i=null===(n=null==e?void 0:e.params)||void 0===n?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=null!=e&&e.reconnectAfterMs?e.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=null!=e&&e.encode?e.encode:(o,a)=>a(JSON.stringify(o)),this.decode=null!=e&&e.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ft((0,d.A)(function*(){t.disconnect(),t.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==e?void 0:e.fetch),null!=e&&e.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==e?void 0:e.worker)||!1,this.workerUrl=null==e?void 0:e.workerUrl}this.accessToken=(null==e?void 0:e.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Ee),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(r,e){this.conn&&(this.conn.onclose=function(){},r?this.conn.close(r,null!=e?e:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(t=>t.teardown()))}getChannels(){return this.channels}removeChannel(r){var e=this;return(0,d.A)(function*(){const t=yield r.unsubscribe();return 0===e.channels.length&&e.disconnect(),t})()}removeAllChannels(){var r=this;return(0,d.A)(function*(){const e=yield Promise.all(r.channels.map(t=>t.unsubscribe()));return r.channels=[],r.disconnect(),e})()}log(r,e,t){this.logger(r,e,t)}connectionState(){switch(this.conn&&this.conn.readyState){case Oe.connecting:return ve.Connecting;case Oe.open:return ve.Open;case Oe.closing:return ve.Closing;default:return ve.Closed}}isConnected(){return this.connectionState()===ve.Open}channel(r,e={config:{}}){const t=`realtime:${r}`,n=this.getChannels().find(i=>i.topic===t);if(n)return n;{const i=new Me(`realtime:${r}`,e,this);return this.channels.push(i),i}}push(r){const{topic:e,event:t,payload:n,ref:i}=r,o=()=>{this.encode(r,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${e} ${t} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(){var r=this;return(0,d.A)(function*(e=null){let t=e||r.accessToken&&(yield r.accessToken())||r.accessTokenValue;r.accessTokenValue!=t&&(r.accessTokenValue=t,r.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t,version:"realtime-js/2.11.15"}),n.joinedOnce&&n._isJoined()&&n._push(ee.access_token,{access_token:t})}))}).apply(this,arguments)}sendHeartbeat(){var r=this;return(0,d.A)(function*(){var e;if(r.isConnected())return r.pendingHeartbeatRef?(r.pendingHeartbeatRef=null,r.log("transport","heartbeat timeout. Attempting to re-establish connection"),r.heartbeatCallback("timeout"),void(null===(e=r.conn)||void 0===e||e.close(1e3,"hearbeat timeout"))):(r.pendingHeartbeatRef=r._makeRef(),r.push({topic:"phoenix",event:"heartbeat",payload:{},ref:r.pendingHeartbeatRef}),r.heartbeatCallback("sent"),void(yield r.setAuth()));r.heartbeatCallback("disconnected")})()}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return this.ref=r===this.ref?0:r,this.ref.toString()}_leaveOpenTopic(r){let e=this.channels.find(t=>t.topic===r&&(t._isJoined()||t._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${r}"`),e.unsubscribe())}_remove(r){this.channels=this.channels.filter(e=>e.topic!==r.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_onConnMessage(r){this.decode(r.data,e=>{let{topic:t,event:n,payload:i,ref:o}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${t} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(t)).forEach(a=>a._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(r=>r())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){this.log("transport","close",r),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(r))}_onConnError(r){this.log("transport",`${r}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(r))}_triggerChanError(){this.channels.forEach(r=>r._trigger(ee.error))}_appendParams(r,e){if(0===Object.keys(e).length)return r;const t=r.match(/\?/)?"&":"?";return`${r}${t}${new URLSearchParams(e)}`}_workerObjectUrl(r){let e;if(r)e=r;else{const t=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});e=URL.createObjectURL(t)}return e}}class qe extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function q(s){return"object"==typeof s&&null!==s&&"__isStorageError"in s}class Xt extends qe{constructor(r,e){super(r),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Fe extends qe{constructor(r,e){super(r),this.name="StorageUnknownError",this.originalError=e}}const yt=s=>{let r;return r=s||(typeof fetch>"u"?(...e)=>Promise.resolve().then(A.bind(A,5286)).then(({default:t})=>t(...e)):fetch),(...e)=>r(...e)},Ke=s=>{if(Array.isArray(s))return s.map(e=>Ke(e));if("function"==typeof s||s!==Object(s))return s;const r={};return Object.entries(s).forEach(([e,t])=>{const n=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));r[n]=Ke(t)}),r};var ce=function(s,r,e,t){return new(e||(e=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function n(i){return i instanceof e?i:new e(function(o){o(i)})}(u.value).then(a,l)}c((t=t.apply(s,r||[])).next())})};const We=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),er=(s,r,e)=>ce(void 0,void 0,void 0,function*(){const t=yield function(s,r,e,t){return new(e||(e=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function n(i){return i instanceof e?i:new e(function(o){o(i)})}(u.value).then(a,l)}c((t=t.apply(s,r||[])).next())})}(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(A.bind(A,5286))).Response:Response});s instanceof t&&(null==e||!e.noResolveJson)?s.json().then(n=>{r(new Xt(We(n),s.status||500))}).catch(n=>{r(new Fe(We(n),n))}):r(new Fe(We(s),s))});function je(s,r,e,t,n,i){return ce(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(e,((s,r,e,t)=>{const n={method:s,headers:(null==r?void 0:r.headers)||{}};return"GET"===s?n:(n.headers=Object.assign({"Content-Type":"application/json"},null==r?void 0:r.headers),t&&(n.body=JSON.stringify(t)),Object.assign(Object.assign({},n),e))})(r,t,n,i)).then(l=>{if(!l.ok)throw l;return null!=t&&t.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>er(l,a,t))})})}function Pe(s,r,e,t){return ce(this,void 0,void 0,function*(){return je(s,"GET",r,e,t)})}function ne(s,r,e,t,n){return ce(this,void 0,void 0,function*(){return je(s,"POST",r,t,n,e)})}function rr(s,r,e,t,n){return ce(this,void 0,void 0,function*(){return je(s,"PUT",r,t,n,e)})}function mt(s,r,e,t,n){return ce(this,void 0,void 0,function*(){return je(s,"DELETE",r,t,n,e)})}var H=function(s,r,e,t){return new(e||(e=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function n(i){return i instanceof e?i:new e(function(o){o(i)})}(u.value).then(a,l)}c((t=t.apply(s,r||[])).next())})};const sr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ir{constructor(r,e={},t,n){this.url=r,this.headers=e,this.bucketId=t,this.fetch=yt(n)}uploadOrUpdate(r,e,t,n){return H(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},bt),n);let a=Object.assign(Object.assign({},this.headers),"POST"===r&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&t instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",t)):typeof FormData<"u"&&t instanceof FormData?(i=t,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=t,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),null!=n&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const c=this._removeEmptyFolders(e),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:r,body:i,headers:a},null!=o&&o.duplex?{duplex:o.duplex}:{})),_=yield h.json();return h.ok?{data:{path:c,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(i){if(q(i))return{data:null,error:i};throw i}})}upload(r,e,t){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,e,t)})}uploadToSignedUrl(r,e,t,n){return H(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(r),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:bt.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.append("cacheControl",c.cacheControl)):(l=t,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),_=yield h.json();return h.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(l){if(q(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(r,e){return H(this,void 0,void 0,function*(){try{let t=this._getFinalPath(r);const n=Object.assign({},this.headers);null!=e&&e.upsert&&(n["x-upsert"]="true");const i=yield ne(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new qe("No token returned by API");return{data:{signedUrl:o.toString(),path:r,token:a},error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}update(r,e,t){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,e,t)})}move(r,e,t){return H(this,void 0,void 0,function*(){try{return{data:yield ne(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:e,destinationBucket:null==t?void 0:t.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}copy(r,e,t){return H(this,void 0,void 0,function*(){try{return{data:{path:(yield ne(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:e,destinationBucket:null==t?void 0:t.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}createSignedUrl(r,e,t){return H(this,void 0,void 0,function*(){try{let n=this._getFinalPath(r),i=yield ne(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:e},null!=t&&t.transform?{transform:t.transform}:{}),{headers:this.headers});const o=null!=t&&t.download?`&download=${!0===t.download?"":t.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}createSignedUrls(r,e,t){return H(this,void 0,void 0,function*(){try{const n=yield ne(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:r},{headers:this.headers}),i=null!=t&&t.download?`&download=${!0===t.download?"":t.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}download(r,e){return H(this,void 0,void 0,function*(){const n=typeof(null==e?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((null==e?void 0:e.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(r);return{data:yield(yield Pe(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(q(a))return{data:null,error:a};throw a}})}info(r){return H(this,void 0,void 0,function*(){const e=this._getFinalPath(r);try{const t=yield Pe(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Ke(t),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}exists(r){return H(this,void 0,void 0,function*(){const e=this._getFinalPath(r);try{return yield function nr(s,r,e,t){return ce(this,void 0,void 0,function*(){return je(s,"HEAD",r,Object.assign(Object.assign({},e),{noResolveJson:!0}),t)})}(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(t){if(q(t)&&t instanceof Fe){const n=t.originalError;if([400,404].includes(null==n?void 0:n.status))return{data:!1,error:t}}throw t}})}getPublicUrl(r,e){const t=this._getFinalPath(r),n=[],i=null!=e&&e.download?`download=${!0===e.download?"":e.download}`:"";""!==i&&n.push(i);const a=typeof(null==e?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((null==e?void 0:e.transform)||{});""!==l&&n.push(l);let c=n.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${t}${c}`)}}}remove(r){return H(this,void 0,void 0,function*(){try{return{data:yield mt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(e){if(q(e))return{data:null,error:e};throw e}})}list(r,e,t){return H(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},sr),e),{prefix:r||""});return{data:yield ne(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const e=[];return r.width&&e.push(`width=${r.width}`),r.height&&e.push(`height=${r.height}`),r.resize&&e.push(`resize=${r.resize}`),r.format&&e.push(`format=${r.format}`),r.quality&&e.push(`quality=${r.quality}`),e.join("&")}}const or={"X-Client-Info":"storage-js/2.7.1"};var ye=function(s,r,e,t){return new(e||(e=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function n(i){return i instanceof e?i:new e(function(o){o(i)})}(u.value).then(a,l)}c((t=t.apply(s,r||[])).next())})};class ar{constructor(r,e={},t){this.url=r,this.headers=Object.assign(Object.assign({},or),e),this.fetch=yt(t)}listBuckets(){return ye(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}})}getBucket(r){return ye(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(e){if(q(e))return{data:null,error:e};throw e}})}createBucket(r,e={public:!1}){return ye(this,void 0,void 0,function*(){try{return{data:yield ne(this.fetch,`${this.url}/bucket`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}updateBucket(r,e){return ye(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}emptyBucket(r){return ye(this,void 0,void 0,function*(){try{return{data:yield ne(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(q(e))return{data:null,error:e};throw e}})}deleteBucket(r){return ye(this,void 0,void 0,function*(){try{return{data:yield mt(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(e){if(q(e))return{data:null,error:e};throw e}})}}class lr extends ar{constructor(r,e={},t){super(r,e,t)}from(r){return new ir(this.url,this.headers,r,this.fetch)}}let xe="";xe=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const cr={headers:{"X-Client-Info":`supabase-js-${xe}/2.51.0`}},dr={schema:"public"},hr={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fr={};var wt=A(5286);const vr=(s,r,e)=>{const t=(s=>{let r;return r=s||(typeof fetch>"u"?wt.default:fetch),(...e)=>r(...e)})(e),n=typeof Headers>"u"?wt.Headers:Headers;return(i,o)=>function(s,r,e,t){return new(e||(e=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function n(i){return i instanceof e?i:new e(function(o){o(i)})}(u.value).then(a,l)}c((t=t.apply(s,r||[])).next())})}(void 0,void 0,void 0,function*(){var a;const l=null!==(a=yield r())&&void 0!==a?a:s;let c=new n(null==o?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),t(i,Object.assign(Object.assign({},o),{headers:c}))})};const me=3e4,Je="X-Supabase-Api-Version",At_2024_01_01_timestamp=Date.parse("2024-01-01T00:00:00.0Z"),At_2024_01_01_name="2024-01-01",Sr=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class He extends Error{constructor(r,e,t){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=t}}function E(s){return"object"==typeof s&&null!==s&&"__isAuthError"in s}class Tr extends He{constructor(r,e,t){super(r,e,t),this.name="AuthApiError",this.status=e,this.code=t}}class St extends He{constructor(r,e){super(r),this.name="AuthUnknownError",this.originalError=e}}class se extends He{constructor(r,e,t,n){super(r,t,n),this.name=e,this.status=t}}class ie extends se{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Re extends se{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $e extends se{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Ce extends se{constructor(r,e=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Et extends se{constructor(r,e=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ve extends se{constructor(r,e){super(r,"AuthRetryableFetchError",e,void 0)}}function Qe(s){return E(s)&&"AuthRetryableFetchError"===s.name}class Tt extends se{constructor(r,e,t){super(r,"AuthWeakPasswordError",e,"weak_password"),this.reasons=t}}class Xe extends se{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jt=" \t\n\r=".split(""),Pr=(()=>{const s=new Array(128);for(let r=0;r<s.length;r+=1)s[r]=-1;for(let r=0;r<jt.length;r+=1)s[jt[r].charCodeAt(0)]=-2;for(let r=0;r<Ie.length;r+=1)s[Ie[r].charCodeAt(0)]=r;return s})();function Ue(s,r,e){if(null!==s)for(r.queue=r.queue<<8|s,r.queuedBits+=8;r.queuedBits>=6;)e(Ie[r.queue>>r.queuedBits-6&63]),r.queuedBits-=6;else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;)e(Ie[r.queue>>r.queuedBits-6&63]),r.queuedBits-=6}function xt(s,r,e){const t=Pr[s];if(!(t>-1)){if(-2===t)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}for(r.queue=r.queue<<6|t,r.queuedBits+=6;r.queuedBits>=8;)e(r.queue>>r.queuedBits-8&255),r.queuedBits-=8}function Ot(s){const r=[],e=o=>{r.push(String.fromCodePoint(o))},t={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{!function $r(s,r,e){if(0===r.utf8seq){if(s<=127)return void e(s);for(let t=1;t<6;t+=1)if(!(s>>7-t&1)){r.utf8seq=t;break}if(2===r.utf8seq)r.codepoint=31&s;else if(3===r.utf8seq)r.codepoint=15&s;else{if(4!==r.utf8seq)throw new Error("Invalid UTF-8 sequence");r.codepoint=7&s}r.utf8seq-=1}else if(r.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|63&s,r.utf8seq-=1,0===r.utf8seq&&e(r.codepoint)}}(o,t,e)};for(let o=0;o<s.length;o+=1)xt(s.charCodeAt(o),n,i);return r.join("")}function Rr(s,r){if(!(s<=127)){if(s<=2047)return r(192|s>>6),void r(128|63&s);if(s<=65535)return r(224|s>>12),r(128|s>>6&63),void r(128|63&s);if(s<=1114111)return r(240|s>>18),r(128|s>>12&63),r(128|s>>6&63),void r(128|63&s);throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}r(s)}function Cr(s){const r=[],e={queue:0,queuedBits:0},t=n=>{r.push(n)};for(let n=0;n<s.length;n+=1)xt(s.charCodeAt(n),e,t);return new Uint8Array(r)}function Ur(s){const r=[],e={queue:0,queuedBits:0},t=n=>{r.push(n)};return s.forEach(n=>Ue(n,e,t)),Ue(null,e,t),r.join("")}const X=()=>typeof window<"u"&&typeof document<"u",de={tested:!1,writable:!1},Rt=()=>{if(!X())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(de.tested)return de.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),de.tested=!0,de.writable=!0}catch{de.tested=!0,de.writable=!1}return de.writable},$t=s=>{let r;return r=s||(typeof fetch>"u"?(...e)=>Promise.resolve().then(A.bind(A,5286)).then(({default:t})=>t(...e)):fetch),(...e)=>r(...e)},be=function(){var s=(0,d.A)(function*(r,e,t){yield r.setItem(e,JSON.stringify(t))});return function(e,t,n){return s.apply(this,arguments)}}(),he=function(){var s=(0,d.A)(function*(r,e){const t=yield r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}});return function(e,t){return s.apply(this,arguments)}}(),oe=function(){var s=(0,d.A)(function*(r,e){yield r.removeItem(e)});return function(e,t){return s.apply(this,arguments)}}();class Le{constructor(){this.promise=new Le.promiseConstructor((r,e)=>{this.resolve=r,this.reject=e})}}function Ye(s){const r=s.split(".");if(3!==r.length)throw new Xe("Invalid JWT structure");for(let t=0;t<r.length;t++)if(!Sr.test(r[t]))throw new Xe("JWT not in base64url format");return{header:JSON.parse(Ot(r[0])),payload:JSON.parse(Ot(r[1])),signature:Cr(r[2]),raw:{header:r[0],payload:r[1]}}}function Ze(){return(Ze=(0,d.A)(function*(s){return yield new Promise(r=>{setTimeout(()=>r(null),s)})})).apply(this,arguments)}function Fr(s){return("0"+s.toString(16)).substr(-2)}function et(){return(et=(0,d.A)(function*(s){const e=(new TextEncoder).encode(s),t=yield crypto.subtle.digest("SHA-256",e),n=new Uint8Array(t);return Array.from(n).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function tt(){return tt=(0,d.A)(function*(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const e=yield function Wr(s){return et.apply(this,arguments)}(s);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),tt.apply(this,arguments)}function we(s,r){return rt.apply(this,arguments)}function rt(){return rt=(0,d.A)(function*(s,r,e=!1){const t=function Kr(){const r=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let i=0;i<56;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(r),Array.from(r,Fr).join("")}();let n=t;e&&(n+="/PASSWORD_RECOVERY"),yield be(s,`${r}-code-verifier`,n);const i=yield function Gr(s){return tt.apply(this,arguments)}(t);return[i,t===i?"plain":"s256"]}),rt.apply(this,arguments)}Le.promiseConstructor=Promise;const zr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Qr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ke(s){if(!Qr.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nt(){return new Proxy({},{get:(r,e)=>{if("__isUserNotAvailableProxy"===e)return!0;if("symbol"==typeof e){const t=e.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}const fe=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Yr=[502,503,504];function Ct(s){return st.apply(this,arguments)}function st(){return(st=(0,d.A)(function*(s){var r;if(!(s=>"object"==typeof s&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json)(s))throw new Ve(fe(s),0);if(Yr.includes(s.status))throw new Ve(fe(s),s.status);let e,t;try{e=yield s.json()}catch(i){throw new St(fe(i),i)}const n=function Jr(s){const r=s.headers.get(Je);if(!r||!r.match(zr))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}(s);if(n&&n.getTime()>=At_2024_01_01_timestamp&&"object"==typeof e&&e&&"string"==typeof e.code?t=e.code:"object"==typeof e&&e&&"string"==typeof e.error_code&&(t=e.error_code),t){if("weak_password"===t)throw new Tt(fe(e),s.status,(null===(r=e.weak_password)||void 0===r?void 0:r.reasons)||[]);if("session_not_found"===t)throw new ie}else if("object"==typeof e&&e&&"object"==typeof e.weak_password&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,o)=>i&&"string"==typeof o,!0))throw new Tt(fe(e),s.status,e.weak_password.reasons);throw new Tr(fe(e),s.status||500,t)})).apply(this,arguments)}function T(s,r,e,t){return it.apply(this,arguments)}function it(){return it=(0,d.A)(function*(s,r,e,t){var n;const i=Object.assign({},null==t?void 0:t.headers);i[Je]||(i[Je]=At_2024_01_01_name),null!=t&&t.jwt&&(i.Authorization=`Bearer ${t.jwt}`);const o=null!==(n=null==t?void 0:t.query)&&void 0!==n?n:{};null!=t&&t.redirectTo&&(o.redirect_to=t.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield function en(s,r,e,t,n,i){return ot.apply(this,arguments)}(s,r,e+a,{headers:i,noResolveJson:null==t?void 0:t.noResolveJson},{},null==t?void 0:t.body);return null!=t&&t.xform?null==t?void 0:t.xform(l):{data:Object.assign({},l),error:null}}),it.apply(this,arguments)}function ot(){return(ot=(0,d.A)(function*(s,r,e,t,n,i){const o=((s,r,e,t)=>{const n={method:s,headers:(null==r?void 0:r.headers)||{}};return"GET"===s?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==r?void 0:r.headers),n.body=JSON.stringify(t),Object.assign(Object.assign({},n),e))})(r,t,n,i);let a;try{a=yield s(e,Object.assign({},o))}catch(l){throw console.error(l),new Ve(fe(l),0)}if(a.ok||(yield Ct(a)),null!=t&&t.noResolveJson)return a;try{return yield a.json()}catch(l){yield Ct(l)}})).apply(this,arguments)}function te(s){var r;let e=null;return function sn(s){return s.access_token&&s.refresh_token&&s.expires_in}(s)&&(e=Object.assign({},s),s.expires_at||(e.expires_at=function Lr(s){return Math.round(Date.now()/1e3)+s}(s.expires_in))),{data:{session:e,user:null!==(r=s.user)&&void 0!==r?r:s},error:null}}function It(s){const r=te(s);return!r.error&&s.weak_password&&"object"==typeof s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&"string"==typeof s.weak_password.message&&s.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(r.data.weak_password=s.weak_password),r}function ae(s){var r;return{data:{user:null!==(r=s.user)&&void 0!==r?r:s},error:null}}function tn(s){return{data:s,error:null}}function rn(s){const{action_link:r,email_otp:e,hashed_token:t,redirect_to:n,verification_type:i}=s,o=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(s);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(s,t[n])&&(e[t[n]]=s[t[n]])}return e}(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:r,email_otp:e,hashed_token:t,redirect_to:n,verification_type:i},user:Object.assign({},o)},error:null}}function nn(s){return s}const at=["global","local","others"];class an{constructor({url:r="",headers:e={},fetch:t}){this.url=r,this.headers=e,this.fetch=$t(t),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(r){var e=this;return(0,d.A)(function*(t,n=at[0]){if(at.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${at.join(", ")}`);try{return yield T(e.fetch,"POST",`${e.url}/logout?scope=${n}`,{headers:e.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(E(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(r){var e=this;return(0,d.A)(function*(t,n={}){try{return yield T(e.fetch,"POST",`${e.url}/invite`,{body:{email:t,data:n.data},headers:e.headers,redirectTo:n.redirectTo,xform:ae})}catch(i){if(E(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(r){var e=this;return(0,d.A)(function*(){try{const{options:t}=r,n=function(s,r){var e={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(e[t]=s[t]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(s);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(s,t[n])&&(e[t[n]]=s[t[n]])}return e}(r,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=null==n?void 0:n.newEmail,delete i.newEmail),yield T(e.fetch,"POST",`${e.url}/admin/generate_link`,{body:i,headers:e.headers,xform:rn,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(E(t))return{data:{properties:null,user:null},error:t};throw t}})()}createUser(r){var e=this;return(0,d.A)(function*(){try{return yield T(e.fetch,"POST",`${e.url}/admin/users`,{body:r,headers:e.headers,xform:ae})}catch(t){if(E(t))return{data:{user:null},error:t};throw t}})()}listUsers(r){var e=this;return(0,d.A)(function*(){var t,n,i,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=yield T(e.fetch,"GET",`${e.url}/admin/users`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==r?void 0:r.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(o=null===(i=null==r?void 0:r.perPage)||void 0===i?void 0:i.toString())&&void 0!==o?o:""},xform:nn});if(h.error)throw h.error;const _=yield h.json(),y=null!==(a=h.headers.get("x-total-count"))&&void 0!==a?a:0,v=null!==(c=null===(l=h.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return v.length>0&&(v.forEach(O=>{const S=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(O.split(";")[1].split("=")[1]);u[`${B}Page`]=S}),u.total=parseInt(y)),{data:Object.assign(Object.assign({},_),u),error:null}}catch(u){if(E(u))return{data:{users:[]},error:u};throw u}})()}getUserById(r){var e=this;return(0,d.A)(function*(){ke(r);try{return yield T(e.fetch,"GET",`${e.url}/admin/users/${r}`,{headers:e.headers,xform:ae})}catch(t){if(E(t))return{data:{user:null},error:t};throw t}})()}updateUserById(r,e){var t=this;return(0,d.A)(function*(){ke(r);try{return yield T(t.fetch,"PUT",`${t.url}/admin/users/${r}`,{body:e,headers:t.headers,xform:ae})}catch(n){if(E(n))return{data:{user:null},error:n};throw n}})()}deleteUser(r){var e=this;return(0,d.A)(function*(t,n=!1){ke(t);try{return yield T(e.fetch,"DELETE",`${e.url}/admin/users/${t}`,{headers:e.headers,body:{should_soft_delete:n},xform:ae})}catch(i){if(E(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(r){var e=this;return(0,d.A)(function*(){ke(r.userId);try{const{data:t,error:n}=yield T(e.fetch,"GET",`${e.url}/admin/users/${r.userId}/factors`,{headers:e.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(E(t))return{data:null,error:t};throw t}})()}_deleteFactor(r){var e=this;return(0,d.A)(function*(){ke(r.userId),ke(r.id);try{return{data:yield T(e.fetch,"DELETE",`${e.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:e.headers}),error:null}}catch(t){if(E(t))return{data:null,error:t};throw t}})()}}function Ut(s={}){return{getItem:r=>s[r]||null,setItem:(r,e)=>{s[r]=e},removeItem:r=>{delete s[r]}}}const Ae_debug=!!(globalThis&&Rt()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Lt extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class un extends Lt{}function dn(s,r,e){return lt.apply(this,arguments)}function lt(){return lt=(0,d.A)(function*(s,r,e){Ae_debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,r);const t=new globalThis.AbortController;return r>0&&setTimeout(()=>{t.abort(),Ae_debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},r),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(s,0===r?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:t.signal},function(){var n=(0,d.A)(function*(i){if(!i){if(0===r)throw Ae_debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new un(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Ae_debug)try{const o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}Ae_debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return yield e()}finally{Ae_debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}});return function(i){return n.apply(this,arguments)}}()))}),lt.apply(this,arguments)}!function ln(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const hn={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.71.0"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function Bt(s,r,e){return ct.apply(this,arguments)}function ct(){return(ct=(0,d.A)(function*(s,r,e){return yield e()})).apply(this,arguments)}const Se={},gn=(()=>{class s{constructor(e){var n,i,t=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=s.nextInstanceID,s.nextInstanceID+=1,this.instanceID>0&&X()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},hn),e);if(this.logDebugMessages=!!o.debug,"function"==typeof o.debug&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new an({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=$t(o.fetch),this.lock=o.lock||Bt,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.lock=o.lock?o.lock:X()&&null!==(n=null==globalThis?void 0:globalThis.navigator)&&void 0!==n&&n.locks?dn:Bt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Rt()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ut(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Ut(this.memoryStorage)),X()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=(0,d.A)(function*(l){t._debug("received broadcast notification from other tab or client",l),yield t._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Se[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Se[this.storageKey]=Object.assign(Object.assign({},Se[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Se[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Se[this.storageKey]=Object.assign(Object.assign({},Se[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.71.0) ${(new Date).toISOString()}`,...e),this}initialize(){var e=this;return(0,d.A)(function*(){return e.initializePromise||(e.initializePromise=(0,d.A)(function*(){return yield e._acquireLock(-1,(0,d.A)(function*(){return yield e._initialize()}))})()),yield e.initializePromise})()}_initialize(){var e=this;return(0,d.A)(function*(){var t;try{const n=function Br(s){const r={},e=new URL(s);if(e.hash&&"#"===e.hash[0])try{new URLSearchParams(e.hash.substring(1)).forEach((n,i)=>{r[i]=n})}catch{}return e.searchParams.forEach((t,n)=>{r[n]=t}),r}(window.location.href);let i="none";if(e._isImplicitGrantCallback(n)?i="implicit":(yield e._isPKCECallback(n))&&(i="pkce"),X()&&e.detectSessionInUrl&&"none"!==i){const{data:o,error:a}=yield e._getSessionFromURL(n,i);if(a){if(e._debug("#_initialize()","error detecting session from URL",a),function Or(s){return E(s)&&"AuthImplicitGrantRedirectError"===s.name}(a)){const u=null===(t=a.details)||void 0===t?void 0:t.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield e._removeSession(),{error:a}}const{session:l,redirectType:c}=o;return e._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield e._saveSession(l),setTimeout((0,d.A)(function*(){"recovery"===c?yield e._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield e._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield e._recoverAndRefresh(),{error:null}}catch(n){return E(n)?{error:n}:{error:new St("Unexpected error during initialization",n)}}finally{yield e._handleVisibilityChange(),e._debug("#_initialize()","end")}})()}signInAnonymously(e){var t=this;return(0,d.A)(function*(){var n,i,o;try{const a=yield T(t.fetch,"POST",`${t.url}/signup`,{headers:t.headers,body:{data:null!==(i=null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(o=null==e?void 0:e.options)||void 0===o?void 0:o.captchaToken}},xform:te}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,h=l.user;return l.session&&(yield t._saveSession(l.session),yield t._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(a){if(E(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(e){var t=this;return(0,d.A)(function*(){var n,i,o;try{let a;if("email"in e){const{email:_,password:y,options:v}=e;let O=null,S=null;"pkce"===t.flowType&&([O,S]=yield we(t.storage,t.storageKey)),a=yield T(t.fetch,"POST",`${t.url}/signup`,{headers:t.headers,redirectTo:null==v?void 0:v.emailRedirectTo,body:{email:_,password:y,data:null!==(n=null==v?void 0:v.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null==v?void 0:v.captchaToken},code_challenge:O,code_challenge_method:S},xform:te})}else{if(!("phone"in e))throw new $e("You must provide either an email or phone number and a password");{const{phone:_,password:y,options:v}=e;a=yield T(t.fetch,"POST",`${t.url}/signup`,{headers:t.headers,body:{phone:_,password:y,data:null!==(i=null==v?void 0:v.data)&&void 0!==i?i:{},channel:null!==(o=null==v?void 0:v.channel)&&void 0!==o?o:"sms",gotrue_meta_security:{captcha_token:null==v?void 0:v.captchaToken}},xform:te})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,h=l.user;return l.session&&(yield t._saveSession(l.session),yield t._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(a){if(E(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(e){var t=this;return(0,d.A)(function*(){try{let n;if("email"in e){const{email:a,password:l,options:c}=e;n=yield T(t.fetch,"POST",`${t.url}/token?grant_type=password`,{headers:t.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken}},xform:It})}else{if(!("phone"in e))throw new $e("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=e;n=yield T(t.fetch,"POST",`${t.url}/token?grant_type=password`,{headers:t.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken}},xform:It})}}const{data:i,error:o}=n;return o?{data:{user:null,session:null},error:o}:i&&i.session&&i.user?(i.session&&(yield t._saveSession(i.session),yield t._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o}):{data:{user:null,session:null},error:new Re}}catch(n){if(E(n))return{data:{user:null,session:null},error:n};throw n}})()}signInWithOAuth(e){var t=this;return(0,d.A)(function*(){var n,i,o,a;return yield t._handleProviderSignIn(e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(i=e.options)||void 0===i?void 0:i.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(e){var t=this;return(0,d.A)(function*(){return yield t.initializePromise,t._acquireLock(-1,(0,d.A)(function*(){return t._exchangeCodeForSession(e)}))})()}signInWithWeb3(e){var t=this;return(0,d.A)(function*(){const{chain:n}=e;if("solana"===n)return yield t.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)})()}signInWithSolana(e){var t=this;return(0,d.A)(function*(){var n,i,o,a,l,c,u,h,_,y,v,O;let S,B;if("message"in e)S=e.message,B=e.signature;else{const{wallet:F,statement:J,options:k}=e;let M;if(X())if("object"==typeof F)M=F;else{const N=window;if(!("solana"in N)||"object"!=typeof N.solana||!("signIn"in N.solana&&"function"==typeof N.solana.signIn||"signMessage"in N.solana&&"function"==typeof N.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");M=N.solana}else{if("object"!=typeof F||null==k||!k.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=F}const Y=new URL(null!==(n=null==k?void 0:k.url)&&void 0!==n?n:window.location.href);if("signIn"in M&&M.signIn){const N=yield M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==k?void 0:k.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),J?{statement:J}:null));let V;if(Array.isArray(N)&&N[0]&&"object"==typeof N[0])V=N[0];else{if(!(N&&"object"==typeof N&&"signedMessage"in N&&"signature"in N))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");V=N}if(!("signedMessage"in V&&"signature"in V&&("string"==typeof V.signedMessage||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");S="string"==typeof V.signedMessage?V.signedMessage:(new TextDecoder).decode(V.signedMessage),B=V.signature}else{if(!("signMessage"in M&&"function"==typeof M.signMessage&&"publicKey"in M&&"object"==typeof M&&M.publicKey&&"toBase58"in M.publicKey&&"function"==typeof M.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${Y.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...J?["",J,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${null!==(o=null===(i=null==k?void 0:k.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==o?o:(new Date).toISOString()}`,...null!==(a=null==k?void 0:k.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...null!==(l=null==k?void 0:k.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...null!==(c=null==k?void 0:k.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...null!==(u=null==k?void 0:k.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...null!==(h=null==k?void 0:k.signInWithSolana)&&void 0!==h&&h.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...null!==(y=null===(_=null==k?void 0:k.signInWithSolana)||void 0===_?void 0:_.resources)&&void 0!==y&&y.length?["Resources",...k.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join("\n");const N=yield M.signMessage((new TextEncoder).encode(S),"utf8");if(!(N&&N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=N}}try{const{data:U,error:F}=yield T(t.fetch,"POST",`${t.url}/token?grant_type=web3`,{headers:t.headers,body:Object.assign({chain:"solana",message:S,signature:Ur(B)},null!==(v=e.options)&&void 0!==v&&v.captchaToken?{gotrue_meta_security:{captcha_token:null===(O=e.options)||void 0===O?void 0:O.captchaToken}}:null),xform:te});if(F)throw F;return U&&U.session&&U.user?(U.session&&(yield t._saveSession(U.session),yield t._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:F}):{data:{user:null,session:null},error:new Re}}catch(U){if(E(U))return{data:{user:null,session:null},error:U};throw U}})()}_exchangeCodeForSession(e){var t=this;return(0,d.A)(function*(){const n=yield he(t.storage,`${t.storageKey}-code-verifier`),[i,o]=(null!=n?n:"").split("/");try{const{data:a,error:l}=yield T(t.fetch,"POST",`${t.url}/token?grant_type=pkce`,{headers:t.headers,body:{auth_code:e,code_verifier:i},xform:te});if(yield oe(t.storage,`${t.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield t._saveSession(a.session),yield t._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:null!=o?o:null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Re}}catch(a){if(E(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(e){var t=this;return(0,d.A)(function*(){try{const{options:n,provider:i,token:o,access_token:a,nonce:l}=e,c=yield T(t.fetch,"POST",`${t.url}/token?grant_type=id_token`,{headers:t.headers,body:{provider:i,id_token:o,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:te}),{data:u,error:h}=c;return h?{data:{user:null,session:null},error:h}:u&&u.session&&u.user?(u.session&&(yield t._saveSession(u.session),yield t._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:h}):{data:{user:null,session:null},error:new Re}}catch(n){if(E(n))return{data:{user:null,session:null},error:n};throw n}})()}signInWithOtp(e){var t=this;return(0,d.A)(function*(){var n,i,o,a,l;try{if("email"in e){const{email:c,options:u}=e;let h=null,_=null;"pkce"===t.flowType&&([h,_]=yield we(t.storage,t.storageKey));const{error:y}=yield T(t.fetch,"POST",`${t.url}/otp`,{headers:t.headers,body:{email:c,data:null!==(n=null==u?void 0:u.data)&&void 0!==n?n:{},create_user:null===(i=null==u?void 0:u.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==u?void 0:u.captchaToken},code_challenge:h,code_challenge_method:_},redirectTo:null==u?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:c,options:u}=e,{data:h,error:_}=yield T(t.fetch,"POST",`${t.url}/otp`,{headers:t.headers,body:{phone:c,data:null!==(o=null==u?void 0:u.data)&&void 0!==o?o:{},create_user:null===(a=null==u?void 0:u.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==u?void 0:u.captchaToken},channel:null!==(l=null==u?void 0:u.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:null==h?void 0:h.message_id},error:_}}throw new $e("You must provide either an email or phone number.")}catch(c){if(E(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(e){var t=this;return(0,d.A)(function*(){var n,i;try{let o,a;"options"in e&&(o=null===(n=e.options)||void 0===n?void 0:n.redirectTo,a=null===(i=e.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield T(t.fetch,"POST",`${t.url}/verify`,{headers:t.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:te});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,h=l.user;return null!=u&&u.access_token&&(yield t._saveSession(u),yield t._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(o){if(E(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithSSO(e){var t=this;return(0,d.A)(function*(){var n,i,o;try{let a=null,l=null;return"pkce"===t.flowType&&([a,l]=yield we(t.storage,t.storageKey)),yield T(t.fetch,"POST",`${t.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(i=null===(n=e.options)||void 0===n?void 0:n.redirectTo)&&void 0!==i?i:void 0}),null!==(o=null==e?void 0:e.options)&&void 0!==o&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:t.headers,xform:tn})}catch(a){if(E(a))return{data:null,error:a};throw a}})()}reauthenticate(){var e=this;return(0,d.A)(function*(){return yield e.initializePromise,yield e._acquireLock(-1,(0,d.A)(function*(){return yield e._reauthenticate()}))})()}_reauthenticate(){var e=this;return(0,d.A)(function*(){try{return yield e._useSession(function(){var t=(0,d.A)(function*(n){const{data:{session:i},error:o}=n;if(o)throw o;if(!i)throw new ie;const{error:a}=yield T(e.fetch,"GET",`${e.url}/reauthenticate`,{headers:e.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(n){return t.apply(this,arguments)}}())}catch(t){if(E(t))return{data:{user:null,session:null},error:t};throw t}})()}resend(e){var t=this;return(0,d.A)(function*(){try{const n=`${t.url}/resend`;if("email"in e){const{email:i,type:o,options:a}=e,{error:l}=yield T(t.fetch,"POST",n,{headers:t.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in e){const{phone:i,type:o,options:a}=e,{data:l,error:c}=yield T(t.fetch,"POST",n,{headers:t.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null==l?void 0:l.message_id},error:c}}throw new $e("You must provide either an email or phone number and a type")}catch(n){if(E(n))return{data:{user:null,session:null},error:n};throw n}})()}getSession(){var e=this;return(0,d.A)(function*(){return yield e.initializePromise,yield e._acquireLock(-1,(0,d.A)(function*(){return e._useSession(function(){var n=(0,d.A)(function*(i){return i});return function(i){return n.apply(this,arguments)}}())}))})()}_acquireLock(e,t){var n=this;return(0,d.A)(function*(){n._debug("#_acquireLock","begin",e);try{if(n.lockAcquired){const i=n.pendingInLock.length?n.pendingInLock[n.pendingInLock.length-1]:Promise.resolve(),o=(0,d.A)(function*(){return yield i,yield t()})();return n.pendingInLock.push((0,d.A)(function*(){try{yield o}catch{}})()),o}return yield n.lock(`lock:${n.storageKey}`,e,(0,d.A)(function*(){n._debug("#_acquireLock","lock acquired for storage key",n.storageKey);try{n.lockAcquired=!0;const i=t();for(n.pendingInLock.push((0,d.A)(function*(){try{yield i}catch{}})()),yield i;n.pendingInLock.length;){const o=[...n.pendingInLock];yield Promise.all(o),n.pendingInLock.splice(0,o.length)}return yield i}finally{n._debug("#_acquireLock","lock released for storage key",n.storageKey),n.lockAcquired=!1}}))}finally{n._debug("#_acquireLock","end")}})()}_useSession(e){var t=this;return(0,d.A)(function*(){t._debug("#_useSession","begin");try{const n=yield t.__loadSession();return yield e(n)}finally{t._debug("#_useSession","end")}})()}__loadSession(){var e=this;return(0,d.A)(function*(){e._debug("#__loadSession()","begin"),e.lockAcquired||e._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let t=null;const n=yield he(e.storage,e.storageKey);if(e._debug("#getSession()","session from storage",n),null!==n&&(e._isValidSession(n)?t=n:(e._debug("#getSession()","session from storage is not valid"),yield e._removeSession())),!t)return{data:{session:null},error:null};const i=!!t.expires_at&&1e3*t.expires_at-Date.now()<9e4;if(e._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(e.userStorage){const l=yield he(e.userStorage,e.storageKey+"-user");t.user=null!=l&&l.user?l.user:nt()}if(e.storage.isServer&&t.user){let l=e.suppressGetSessionWarning;t=new Proxy(t,{get:(u,h,_)=>(!l&&"user"===h&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,e.suppressGetSessionWarning=!0),Reflect.get(u,h,_))})}return{data:{session:t},error:null}}const{session:o,error:a}=yield e._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{e._debug("#__loadSession()","end")}})()}getUser(e){var t=this;return(0,d.A)(function*(){return e?yield t._getUser(e):(yield t.initializePromise,yield t._acquireLock(-1,(0,d.A)(function*(){return yield t._getUser()})))})()}_getUser(e){var t=this;return(0,d.A)(function*(){try{return e?yield T(t.fetch,"GET",`${t.url}/user`,{headers:t.headers,jwt:e,xform:ae}):yield t._useSession(function(){var n=(0,d.A)(function*(i){var o,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(o=c.session)&&void 0!==o&&o.access_token||t.hasCustomAuthorizationHeader?yield T(t.fetch,"GET",`${t.url}/user`,{headers:t.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:ae}):{data:{user:null},error:new ie}});return function(i){return n.apply(this,arguments)}}())}catch(n){if(E(n))return function xr(s){return E(s)&&"AuthSessionMissingError"===s.name}(n)&&(yield t._removeSession(),yield oe(t.storage,`${t.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}})()}updateUser(e){var t=this;return(0,d.A)(function*(n,i={}){return yield t.initializePromise,yield t._acquireLock(-1,(0,d.A)(function*(){return yield t._updateUser(n,i)}))}).apply(this,arguments)}_updateUser(e){var t=this;return(0,d.A)(function*(n,i={}){try{return yield t._useSession(function(){var o=(0,d.A)(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new ie;const u=l.session;let h=null,_=null;"pkce"===t.flowType&&null!=n.email&&([h,_]=yield we(t.storage,t.storageKey));const{data:y,error:v}=yield T(t.fetch,"PUT",`${t.url}/user`,{headers:t.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:h,code_challenge_method:_}),jwt:u.access_token,xform:ae});if(v)throw v;return u.user=y.user,yield t._saveSession(u),yield t._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return o.apply(this,arguments)}}())}catch(o){if(E(o))return{data:{user:null},error:o};throw o}}).apply(this,arguments)}setSession(e){var t=this;return(0,d.A)(function*(){return yield t.initializePromise,yield t._acquireLock(-1,(0,d.A)(function*(){return yield t._setSession(e)}))})()}_setSession(e){var t=this;return(0,d.A)(function*(){try{if(!e.access_token||!e.refresh_token)throw new ie;const n=Date.now()/1e3;let i=n,o=!0,a=null;const{payload:l}=Ye(e.access_token);if(l.exp&&(i=l.exp,o=i<=n),o){const{session:c,error:u}=yield t._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield t._getUser(e.access_token);if(u)throw u;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-n,expires_at:i},yield t._saveSession(a),yield t._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(E(n))return{data:{session:null,user:null},error:n};throw n}})()}refreshSession(e){var t=this;return(0,d.A)(function*(){return yield t.initializePromise,yield t._acquireLock(-1,(0,d.A)(function*(){return yield t._refreshSession(e)}))})()}_refreshSession(e){var t=this;return(0,d.A)(function*(){try{return yield t._useSession(function(){var n=(0,d.A)(function*(i){var o;if(!e){const{data:c,error:u}=i;if(u)throw u;e=null!==(o=c.session)&&void 0!==o?o:void 0}if(null==e||!e.refresh_token)throw new ie;const{session:a,error:l}=yield t._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return n.apply(this,arguments)}}())}catch(n){if(E(n))return{data:{user:null,session:null},error:n};throw n}})()}_getSessionFromURL(e,t){var n=this;return(0,d.A)(function*(){try{if(!X())throw new Ce("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ce(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===n.flowType)throw new Et("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===n.flowType)throw new Ce("Not a valid implicit grant flow url.")}if("pkce"===t){if(n._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Et("No code detected.");const{data:J,error:k}=yield n._exchangeCodeForSession(e.code);if(k)throw k;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:J.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:h}=e;if(!(a&&c&&l&&h))throw new Ce("No session defined in URL");const _=Math.round(Date.now()/1e3),y=parseInt(c);let v=_+y;u&&(v=parseInt(u));const O=v-_;1e3*O<=me&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${O}s, should have been closer to ${y}s`);const S=v-y;_-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,_):_-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,_);const{data:B,error:U}=yield n._getUser(a);if(U)throw U;const F={provider_token:i,provider_refresh_token:o,access_token:a,expires_in:y,expires_at:v,refresh_token:l,token_type:h,user:B.user};return window.location.hash="",n._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:F,redirectType:e.type},error:null}}catch(i){if(E(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(e){return!(!e.access_token&&!e.error_description)}_isPKCECallback(e){var t=this;return(0,d.A)(function*(){const n=yield he(t.storage,`${t.storageKey}-code-verifier`);return!(!e.code||!n)})()}signOut(){var e=this;return(0,d.A)(function*(t={scope:"global"}){return yield e.initializePromise,yield e._acquireLock(-1,(0,d.A)(function*(){return yield e._signOut(t)}))}).apply(this,arguments)}_signOut(){var e=this;return(0,d.A)(function*({scope:t}={scope:"global"}){return yield e._useSession(function(){var n=(0,d.A)(function*(i){var o;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(o=a.session)||void 0===o?void 0:o.access_token;if(c){const{error:u}=yield e.admin.signOut(c,t);if(u&&(!function jr(s){return E(s)&&"AuthApiError"===s.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==t&&(yield e._removeSession(),yield oe(e.storage,`${e.storageKey}-code-verifier`)),{error:null}});return function(i){return n.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(e){var t=this;const n=function Dr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const r=16*Math.random()|0;return("x"==s?r:3&r|8).toString(16)})}(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(0,d.A)(function*(){yield t.initializePromise,yield t._acquireLock(-1,(0,d.A)(function*(){t._emitInitialSession(n)}))})(),{data:{subscription:i}}}_emitInitialSession(e){var t=this;return(0,d.A)(function*(){return yield t._useSession(function(){var n=(0,d.A)(function*(i){var o,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(o=t.stateChangeEmitters.get(e))||void 0===o?void 0:o.callback("INITIAL_SESSION",l),t._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){yield null===(a=t.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),t._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}});return function(i){return n.apply(this,arguments)}}())})()}resetPasswordForEmail(e){var t=this;return(0,d.A)(function*(n,i={}){let o=null,a=null;"pkce"===t.flowType&&([o,a]=yield we(t.storage,t.storageKey,!0));try{return yield T(t.fetch,"POST",`${t.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:t.headers,redirectTo:i.redirectTo})}catch(l){if(E(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var e=this;return(0,d.A)(function*(){var t;try{const{data:n,error:i}=yield e.getUser();if(i)throw i;return{data:{identities:null!==(t=n.user.identities)&&void 0!==t?t:[]},error:null}}catch(n){if(E(n))return{data:null,error:n};throw n}})()}linkIdentity(e){var t=this;return(0,d.A)(function*(){var n;try{const{data:i,error:o}=yield t._useSession(function(){var a=(0,d.A)(function*(l){var c,u,h,_,y;const{data:v,error:O}=l;if(O)throw O;const S=yield t._getUrlForProvider(`${t.url}/user/identities/authorize`,e.provider,{redirectTo:null===(c=e.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=e.options)||void 0===u?void 0:u.scopes,queryParams:null===(h=e.options)||void 0===h?void 0:h.queryParams,skipBrowserRedirect:!0});return yield T(t.fetch,"GET",S,{headers:t.headers,jwt:null!==(y=null===(_=v.session)||void 0===_?void 0:_.access_token)&&void 0!==y?y:void 0})});return function(l){return a.apply(this,arguments)}}());if(o)throw o;return X()&&!(null!==(n=e.options)&&void 0!==n&&n.skipBrowserRedirect)&&window.location.assign(null==i?void 0:i.url),{data:{provider:e.provider,url:null==i?void 0:i.url},error:null}}catch(i){if(E(i))return{data:{provider:e.provider,url:null},error:i};throw i}})()}unlinkIdentity(e){var t=this;return(0,d.A)(function*(){try{return yield t._useSession(function(){var n=(0,d.A)(function*(i){var o,a;const{data:l,error:c}=i;if(c)throw c;return yield T(t.fetch,"DELETE",`${t.url}/user/identities/${e.identity_id}`,{headers:t.headers,jwt:null!==(a=null===(o=l.session)||void 0===o?void 0:o.access_token)&&void 0!==a?a:void 0})});return function(i){return n.apply(this,arguments)}}())}catch(n){if(E(n))return{data:null,error:n};throw n}})()}_refreshAccessToken(e){var t=this;return(0,d.A)(function*(){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;t._debug(n,"begin");try{const i=Date.now();return yield function qr(s,r){return new Promise((t,n)=>{(0,d.A)(function*(){for(let i=0;i<1/0;i++)try{const o=yield s(i);if(!r(i,null,o))return void t(o)}catch(o){if(!r(i,o))return void n(o)}})()})}(function(){var o=(0,d.A)(function*(a){return a>0&&(yield function Mr(s){return Ze.apply(this,arguments)}(200*Math.pow(2,a-1))),t._debug(n,"refreshing attempt",a),yield T(t.fetch,"POST",`${t.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:t.headers,xform:te})});return function(a){return o.apply(this,arguments)}}(),(o,a)=>{const l=200*Math.pow(2,o);return a&&Qe(a)&&Date.now()+l-i<me})}catch(i){if(t._debug(n,"error",i),E(i))return{data:{session:null,user:null},error:i};throw i}finally{t._debug(n,"end")}})()}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){var n=this;return(0,d.A)(function*(){const i=yield n._getUrlForProvider(`${n.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return n._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),X()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})()}_recoverAndRefresh(){var e=this;return(0,d.A)(function*(){var t,n;const i="#_recoverAndRefresh()";e._debug(i,"begin");try{const o=yield he(e.storage,e.storageKey);if(o&&e.userStorage){let l=yield he(e.userStorage,e.storageKey+"-user");!e.storage.isServer&&Object.is(e.storage,e.userStorage)&&!l&&(l={user:o.user},yield be(e.userStorage,e.storageKey+"-user",l)),o.user=null!==(t=null==l?void 0:l.user)&&void 0!==t?t:nt()}else if(o&&!o.user&&!o.user){const l=yield he(e.storage,e.storageKey+"-user");l&&null!=l&&l.user?(o.user=l.user,yield oe(e.storage,e.storageKey+"-user"),yield be(e.storage,e.storageKey,o)):o.user=nt()}if(e._debug(i,"session from storage",o),!e._isValidSession(o))return e._debug(i,"session is not valid"),void(null!==o&&(yield e._removeSession()));const a=1e3*(null!==(n=o.expires_at)&&void 0!==n?n:1/0)-Date.now()<9e4;if(e._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(e.autoRefreshToken&&o.refresh_token){const{error:l}=yield e._callRefreshToken(o.refresh_token);l&&(console.error(l),Qe(l)||(e._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield e._removeSession()))}}else if(o.user&&!0===o.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield e._getUser(o.access_token);!c&&null!=l&&l.user?(o.user=l.user,yield e._saveSession(o),yield e._notifyAllSubscribers("SIGNED_IN",o)):e._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),e._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield e._notifyAllSubscribers("SIGNED_IN",o)}catch(o){return e._debug(i,"error",o),void console.error(o)}finally{e._debug(i,"end")}})()}_callRefreshToken(e){var t=this;return(0,d.A)(function*(){var n,i;if(!e)throw new ie;if(t.refreshingDeferred)return t.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;t._debug(o,"begin");try{t.refreshingDeferred=new Le;const{data:a,error:l}=yield t._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new ie;yield t._saveSession(a.session),yield t._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return t.refreshingDeferred.resolve(c),c}catch(a){if(t._debug(o,"error",a),E(a)){const l={session:null,error:a};return Qe(a)||(yield t._removeSession()),null===(n=t.refreshingDeferred)||void 0===n||n.resolve(l),l}throw null===(i=t.refreshingDeferred)||void 0===i||i.reject(a),a}finally{t.refreshingDeferred=null,t._debug(o,"end")}})()}_notifyAllSubscribers(e,t){var n=this;return(0,d.A)(function*(i,o,a=!0){const l=`#_notifyAllSubscribers(${i})`;n._debug(l,"begin",o,`broadcast = ${a}`);try{n.broadcastChannel&&a&&n.broadcastChannel.postMessage({event:i,session:o});const c=[],u=Array.from(n.stateChangeEmitters.values()).map(function(){var h=(0,d.A)(function*(_){try{yield _.callback(i,o)}catch(y){c.push(y)}});return function(_){return h.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let h=0;h<c.length;h+=1)console.error(c[h]);throw c[0]}}finally{n._debug(l,"end")}}).apply(this,arguments)}_saveSession(e){var t=this;return(0,d.A)(function*(){t._debug("#_saveSession()",e),t.suppressGetSessionWarning=!0;const n=Object.assign({},e);if(t.userStorage){(!n.user||!0!==n.user.__isUserNotAvailableProxy)&&n.user&&(yield be(t.userStorage,t.storageKey+"-user",{user:n.user}));const o=Object.assign({},n);delete o.user;const a=structuredClone(o);yield be(t.storage,t.storageKey,a)}else{const o=structuredClone(n);yield be(t.storage,t.storageKey,o)}})()}_removeSession(){var e=this;return(0,d.A)(function*(){e._debug("#_removeSession()"),yield oe(e.storage,e.storageKey),yield oe(e.storage,e.storageKey+"-code-verifier"),yield oe(e.storage,e.storageKey+"-user"),e.userStorage&&(yield oe(e.userStorage,e.storageKey+"-user")),yield e._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&X()&&null!=window&&window.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){var e=this;return(0,d.A)(function*(){yield e._stopAutoRefresh(),e._debug("#_startAutoRefresh()");const t=setInterval(()=>e._autoRefreshTokenTick(),me);e.autoRefreshTicker=t,t&&"object"==typeof t&&"function"==typeof t.unref?t.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(t),setTimeout((0,d.A)(function*(){yield e.initializePromise,yield e._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var e=this;return(0,d.A)(function*(){e._debug("#_stopAutoRefresh()");const t=e.autoRefreshTicker;e.autoRefreshTicker=null,t&&clearInterval(t)})()}startAutoRefresh(){var e=this;return(0,d.A)(function*(){e._removeVisibilityChangedCallback(),yield e._startAutoRefresh()})()}stopAutoRefresh(){var e=this;return(0,d.A)(function*(){e._removeVisibilityChangedCallback(),yield e._stopAutoRefresh()})()}_autoRefreshTokenTick(){var e=this;return(0,d.A)(function*(){e._debug("#_autoRefreshTokenTick()","begin");try{yield e._acquireLock(0,(0,d.A)(function*(){try{const t=Date.now();try{return yield e._useSession(function(){var n=(0,d.A)(function*(i){const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at)return void e._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*o.expires_at-t)/me);e._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield e._callRefreshToken(o.refresh_token))});return function(i){return n.apply(this,arguments)}}())}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{e._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(!(t.isAcquireTimeout||t instanceof Lt))throw t;e._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var e=this;return(0,d.A)(function*(){if(e._debug("#_handleVisibilityChange()"),!X()||null==window||!window.addEventListener)return e.autoRefreshToken&&e.startAutoRefresh(),!1;try{e.visibilityChangedCallback=(0,d.A)(function*(){return yield e._onVisibilityChanged(!1)}),null==window||window.addEventListener("visibilitychange",e.visibilityChangedCallback),yield e._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})()}_onVisibilityChanged(e){var t=this;return(0,d.A)(function*(){const n=`#_onVisibilityChanged(${e})`;t._debug(n,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(t.autoRefreshToken&&t._startAutoRefresh(),e||(yield t.initializePromise,yield t._acquireLock(-1,(0,d.A)(function*(){"visible"===document.visibilityState?yield t._recoverAndRefresh():t._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&t.autoRefreshToken&&t._stopAutoRefresh()})()}_getUrlForProvider(e,t,n){var i=this;return(0,d.A)(function*(){const o=[`provider=${encodeURIComponent(t)}`];if(null!=n&&n.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),null!=n&&n.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===i.flowType){const[a,l]=yield we(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});o.push(c.toString())}if(null!=n&&n.queryParams){const a=new URLSearchParams(n.queryParams);o.push(a.toString())}return null!=n&&n.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${o.join("&")}`})()}_unenroll(e){var t=this;return(0,d.A)(function*(){try{return yield t._useSession(function(){var n=(0,d.A)(function*(i){var o;const{data:a,error:l}=i;return l?{data:null,error:l}:yield T(t.fetch,"DELETE",`${t.url}/factors/${e.factorId}`,{headers:t.headers,jwt:null===(o=null==a?void 0:a.session)||void 0===o?void 0:o.access_token})});return function(i){return n.apply(this,arguments)}}())}catch(n){if(E(n))return{data:null,error:n};throw n}})()}_enroll(e){var t=this;return(0,d.A)(function*(){try{return yield t._useSession(function(){var n=(0,d.A)(function*(i){var o,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:_}=yield T(t.fetch,"POST",`${t.url}/factors`,{body:u,headers:t.headers,jwt:null===(o=null==l?void 0:l.session)||void 0===o?void 0:o.access_token});return _?{data:null,error:_}:("totp"===e.factorType&&!(null===(a=null==h?void 0:h.totp)||void 0===a)&&a.qr_code&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})});return function(i){return n.apply(this,arguments)}}())}catch(n){if(E(n))return{data:null,error:n};throw n}})()}_verify(e){var t=this;return(0,d.A)(function*(){return t._acquireLock(-1,(0,d.A)(function*(){try{return yield t._useSession(function(){var n=(0,d.A)(function*(i){var o;const{data:a,error:l}=i;if(l)return{data:null,error:l};const{data:c,error:u}=yield T(t.fetch,"POST",`${t.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:t.headers,jwt:null===(o=null==a?void 0:a.session)||void 0===o?void 0:o.access_token});return u?{data:null,error:u}:(yield t._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),yield t._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:u})});return function(i){return n.apply(this,arguments)}}())}catch(n){if(E(n))return{data:null,error:n};throw n}}))})()}_challenge(e){var t=this;return(0,d.A)(function*(){return t._acquireLock(-1,(0,d.A)(function*(){try{return yield t._useSession(function(){var n=(0,d.A)(function*(i){var o;const{data:a,error:l}=i;return l?{data:null,error:l}:yield T(t.fetch,"POST",`${t.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:t.headers,jwt:null===(o=null==a?void 0:a.session)||void 0===o?void 0:o.access_token})});return function(i){return n.apply(this,arguments)}}())}catch(n){if(E(n))return{data:null,error:n};throw n}}))})()}_challengeAndVerify(e){var t=this;return(0,d.A)(function*(){const{data:n,error:i}=yield t._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield t._verify({factorId:e.factorId,challengeId:n.id,code:e.code})})()}_listFactors(){var e=this;return(0,d.A)(function*(){const{data:{user:t},error:n}=yield e.getUser();if(n)return{data:null,error:n};const i=(null==t?void 0:t.factors)||[],o=i.filter(l=>"totp"===l.factor_type&&"verified"===l.status),a=i.filter(l=>"phone"===l.factor_type&&"verified"===l.status);return{data:{all:i,totp:o,phone:a},error:null}})()}_getAuthenticatorAssuranceLevel(){var e=this;return(0,d.A)(function*(){return e._acquireLock(-1,(0,d.A)(function*(){return yield e._useSession(function(){var t=(0,d.A)(function*(n){var i,o;const{data:{session:a},error:l}=n;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Ye(a.access_token);let u=null;c.aal&&(u=c.aal);let h=u;return(null!==(o=null===(i=a.user.factors)||void 0===i?void 0:i.filter(v=>"verified"===v.status))&&void 0!==o?o:[]).length>0&&(h="aal2"),{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:c.amr||[]},error:null}});return function(n){return t.apply(this,arguments)}}())}))})()}fetchJwk(e){var t=this;return(0,d.A)(function*(n,i={keys:[]}){let o=i.keys.find(u=>u.kid===n);if(o)return o;const a=Date.now();if(o=t.jwks.keys.find(u=>u.kid===n),o&&t.jwks_cached_at+6e5>a)return o;const{data:l,error:c}=yield T(t.fetch,"GET",`${t.url}/.well-known/jwks.json`,{headers:t.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(t.jwks=l,t.jwks_cached_at=a,o=l.keys.find(u=>u.kid===n),o)?o:null}).apply(this,arguments)}getClaims(e){var t=this;return(0,d.A)(function*(n,i={}){try{let o=n;if(!o){const{data:S,error:B}=yield t.getSession();if(B||!S.session)return{data:null,error:B};o=S.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:h}}=Ye(o);null!=i&&i.allowExpired||function Hr(s){if(!s)throw new Error("Missing exp claim");if(s<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const _=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield t.fetchJwk(a.kid,null!=i&&i.keys?{keys:i.keys}:null==i?void 0:i.jwks):null;if(!_){const{error:S}=yield t.getUser(o);if(S)throw S;return{data:{claims:l,header:a,signature:c},error:null}}const y=function Vr(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),v=yield crypto.subtle.importKey("jwk",_,y,!0,["verify"]);if(!(yield crypto.subtle.verify(y,v,c,function Ir(s){const r=[];return function Pt(s,r){for(let e=0;e<s.length;e+=1){let t=s.charCodeAt(e);if(t>55295&&t<=56319){const n=1024*(t-55296)&65535;t=65536+(s.charCodeAt(e+1)-56320&65535|n),e+=1}Rr(t,r)}}(s,e=>r.push(e)),new Uint8Array(r)}(`${u}.${h}`))))throw new Xe("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(o){if(E(o))return{data:null,error:o};throw o}}).apply(this,arguments)}}return s.nextInstanceID=0,s})();class pn extends gn{constructor(r){super(r)}}const De=new class vn{constructor(r,e,t){var n,i,o;if(this.supabaseUrl=r,this.supabaseKey=e,!r)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");const a=function mr(s){return s.endsWith("/")?s:s+"/"}(r),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h=function br(s,r){var e,t;const{db:n,auth:i,realtime:o,global:a}=s,{db:l,auth:c,realtime:u,global:h}=r,_={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},null!==(e=null==h?void 0:h.headers)&&void 0!==e?e:{}),null!==(t=null==a?void 0:a.headers)&&void 0!==t?t:{})}),accessToken:()=>function(s,r,e,t){return new(e||(e=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function n(i){return i instanceof e?i:new e(function(o){o(i)})}(u.value).then(a,l)}c((t=t.apply(s,r||[])).next())})}(this,void 0,void 0,function*(){return""})};return s.accessToken?_.accessToken=s.accessToken:delete _.accessToken,_}(null!=t?t:{},{db:dr,realtime:fr,auth:Object.assign(Object.assign({},hr),{storageKey:c}),global:cr});this.storageKey=null!==(n=h.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(i=h.global.headers)&&void 0!==i?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(_,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=h.auth)&&void 0!==o?o:{},this.headers,h.global.fetch),this.fetch=vr(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new P(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new w(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new lr(this.storageUrl.href,this.headers,this.fetch)}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,e={},t={}){return this.rest.rpc(r,e,t)}channel(r,e={config:{}}){return this.realtime.channel(r,e)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var r,e;return function(s,r,e,t){return new(e||(e=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function n(i){return i instanceof e?i:new e(function(o){o(i)})}(u.value).then(a,l)}c((t=t.apply(s,r||[])).next())})}(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:t}=yield this.auth.getSession();return null!==(e=null===(r=t.session)||void 0===r?void 0:r.access_token)&&void 0!==e?e:null})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:n,storageKey:i,flowType:o,lock:a,debug:l},c,u){return new pn({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),c),storageKey:i,autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:n,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(r){return new Qt(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},null==r?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(r,e,t){"TOKEN_REFRESHED"!==r&&"SIGNED_IN"!==r||this.changedAccessToken===t?"SIGNED_OUT"===r&&(this.realtime.setAuth(),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=t}}("https://ctthrwffzswlkmxoudet.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN0dGhyd2ZmenN3bGtteG91ZGV0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMzM3NDksImV4cCI6MjA2NTkwOTc0OX0.AsAxk4KmgxagygVnBPX-fvOmtd2ueCB5MYaqrsphSHM",void 0);var yn=A(1360);let mn=(()=>{var s;class r{constructor(){}getAllUsers(){return(0,d.A)(function*(){return yield De.from("users").select("*")})()}signupWithEmail(t){return(0,d.A)(function*({name:n,email:i,password:o}){return yield De.auth.signUp({email:i,password:o,options:{data:{name:n}}})}).apply(this,arguments)}signupWithPhoneNumber(t){return(0,d.A)(function*({phone:n,password:i}){return yield De.auth.signUp({phone:n,password:i})}).apply(this,arguments)}login(t){return(0,d.A)(function*({email:n,password:i}){return yield De.auth.signInWithPassword({email:n,password:i})}).apply(this,arguments)}}return(s=r).\u0275fac=function(t){return new(t||s)},s.\u0275prov=yn.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),r})()},3056:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.version=void 0,b.version="0.0.0-automated"},3057:(W,b,A)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DEFAULT_HEADERS=void 0;const d=A(3056);b.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${d.version}`}},3242:function(W,b,A){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(b,"__esModule",{value:!0});const j=d(A(8666)),L=d(A(3608)),x=A(3057);class f{constructor(p,{headers:m={},schema:w,fetch:$}={}){this.url=p,this.headers=Object.assign(Object.assign({},x.DEFAULT_HEADERS),m),this.schemaName=w,this.fetch=$}from(p){const m=new URL(`${this.url}/${p}`);return new j.default(m,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(p){return new f(this.url,{headers:this.headers,schema:p,fetch:this.fetch})}rpc(p,m={},{head:w=!1,get:$=!1,count:P}={}){let R;const I=new URL(`${this.url}/rpc/${p}`);let K;w||$?(R=w?"HEAD":"GET",Object.entries(m).filter(([Z,D])=>void 0!==D).map(([Z,D])=>[Z,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([Z,D])=>{I.searchParams.append(Z,D)})):(R="POST",K=m);const Q=Object.assign({},this.headers);return P&&(Q.Prefer=`count=${P}`),new L.default({method:R,url:I,headers:Q,schema:this.schemaName,body:K,fetch:this.fetch,allowEmpty:!1})}}b.default=f},3342:function(W,b,A){"use strict";var d=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(b,"__esModule",{value:!0});const j=d(A(5958));b.default=class L extends j.default{select(f){let g=!1;const p=(null!=f?f:"*").split("").map(m=>/\s/.test(m)&&!g?"":('"'===m&&(g=!g),m)).join("");return this.url.searchParams.set("select",p),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(f,{ascending:g=!0,nullsFirst:p,foreignTable:m,referencedTable:w=m}={}){const $=w?`${w}.order`:"order",P=this.url.searchParams.get($);return this.url.searchParams.set($,`${P?`${P},`:""}${f}.${g?"asc":"desc"}${void 0===p?"":p?".nullsfirst":".nullslast"}`),this}limit(f,{foreignTable:g,referencedTable:p=g}={}){return this.url.searchParams.set(typeof p>"u"?"limit":`${p}.limit`,`${f}`),this}range(f,g,{foreignTable:p,referencedTable:m=p}={}){const $=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(typeof m>"u"?"offset":`${m}.offset`,`${f}`),this.url.searchParams.set($,""+(g-f+1)),this}abortSignal(f){return this.signal=f,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="GET"===this.method?"application/json":"application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:f=!1,verbose:g=!1,settings:p=!1,buffers:m=!1,wal:w=!1,format:$="text"}={}){var P;const R=[f?"analyze":null,g?"verbose":null,p?"settings":null,m?"buffers":null,w?"wal":null].filter(Boolean).join("|"),I=null!==(P=this.headers.Accept)&&void 0!==P?P:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${$}; for="${I}"; options=${R};`,this}rollback(){var f;return(null!==(f=this.headers.Prefer)&&void 0!==f?f:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}},3608:function(W,b,A){"use strict";var d=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(b,"__esModule",{value:!0});const j=d(A(3342));b.default=class L extends j.default{eq(f,g){return this.url.searchParams.append(f,`eq.${g}`),this}neq(f,g){return this.url.searchParams.append(f,`neq.${g}`),this}gt(f,g){return this.url.searchParams.append(f,`gt.${g}`),this}gte(f,g){return this.url.searchParams.append(f,`gte.${g}`),this}lt(f,g){return this.url.searchParams.append(f,`lt.${g}`),this}lte(f,g){return this.url.searchParams.append(f,`lte.${g}`),this}like(f,g){return this.url.searchParams.append(f,`like.${g}`),this}likeAllOf(f,g){return this.url.searchParams.append(f,`like(all).{${g.join(",")}}`),this}likeAnyOf(f,g){return this.url.searchParams.append(f,`like(any).{${g.join(",")}}`),this}ilike(f,g){return this.url.searchParams.append(f,`ilike.${g}`),this}ilikeAllOf(f,g){return this.url.searchParams.append(f,`ilike(all).{${g.join(",")}}`),this}ilikeAnyOf(f,g){return this.url.searchParams.append(f,`ilike(any).{${g.join(",")}}`),this}is(f,g){return this.url.searchParams.append(f,`is.${g}`),this}in(f,g){const p=Array.from(new Set(g)).map(m=>"string"==typeof m&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(f,`in.(${p})`),this}contains(f,g){return"string"==typeof g?this.url.searchParams.append(f,`cs.${g}`):Array.isArray(g)?this.url.searchParams.append(f,`cs.{${g.join(",")}}`):this.url.searchParams.append(f,`cs.${JSON.stringify(g)}`),this}containedBy(f,g){return"string"==typeof g?this.url.searchParams.append(f,`cd.${g}`):Array.isArray(g)?this.url.searchParams.append(f,`cd.{${g.join(",")}}`):this.url.searchParams.append(f,`cd.${JSON.stringify(g)}`),this}rangeGt(f,g){return this.url.searchParams.append(f,`sr.${g}`),this}rangeGte(f,g){return this.url.searchParams.append(f,`nxl.${g}`),this}rangeLt(f,g){return this.url.searchParams.append(f,`sl.${g}`),this}rangeLte(f,g){return this.url.searchParams.append(f,`nxr.${g}`),this}rangeAdjacent(f,g){return this.url.searchParams.append(f,`adj.${g}`),this}overlaps(f,g){return this.url.searchParams.append(f,"string"==typeof g?`ov.${g}`:`ov.{${g.join(",")}}`),this}textSearch(f,g,{config:p,type:m}={}){let w="";return"plain"===m?w="pl":"phrase"===m?w="ph":"websearch"===m&&(w="w"),this.url.searchParams.append(f,`${w}fts${void 0===p?"":`(${p})`}.${g}`),this}match(f){return Object.entries(f).forEach(([g,p])=>{this.url.searchParams.append(g,`eq.${p}`)}),this}not(f,g,p){return this.url.searchParams.append(f,`not.${g}.${p}`),this}or(f,{foreignTable:g,referencedTable:p=g}={}){return this.url.searchParams.append(p?`${p}.or`:"or",`(${f})`),this}filter(f,g,p){return this.url.searchParams.append(f,`${g}.${p}`),this}}},4060:function(W,b,A){"use strict";var d=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(b,"__esModule",{value:!0}),b.PostgrestError=b.PostgrestBuilder=b.PostgrestTransformBuilder=b.PostgrestFilterBuilder=b.PostgrestQueryBuilder=b.PostgrestClient=void 0;const j=d(A(3242));b.PostgrestClient=j.default;const L=d(A(8666));b.PostgrestQueryBuilder=L.default;const x=d(A(3608));b.PostgrestFilterBuilder=x.default;const f=d(A(3342));b.PostgrestTransformBuilder=f.default;const g=d(A(5958));b.PostgrestBuilder=g.default;const p=d(A(4659));b.PostgrestError=p.default,b.default={PostgrestClient:j.default,PostgrestQueryBuilder:L.default,PostgrestFilterBuilder:x.default,PostgrestTransformBuilder:f.default,PostgrestBuilder:g.default,PostgrestError:p.default}},4659:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});class A extends Error{constructor(j){super(j.message),this.name="PostgrestError",this.details=j.details,this.hint=j.hint,this.code=j.code}}b.default=A},5286:(W,b,A)=>{"use strict";A.r(b),A.d(b,{Headers:()=>f,Request:()=>g,Response:()=>p,default:()=>x,fetch:()=>L});var j=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const L=j.fetch,x=j.fetch.bind(j),f=j.Headers,g=j.Request,p=j.Response},5958:function(W,b,A){"use strict";var d=A(9293).default,j=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(b,"__esModule",{value:!0});const L=j(A(5286)),x=j(A(4659));b.default=class f{constructor(p){this.shouldThrowOnError=!1,this.method=p.method,this.url=p.url,this.headers=p.headers,this.schema=p.schema,this.body=p.body,this.shouldThrowOnError=p.shouldThrowOnError,this.signal=p.signal,this.isMaybeSingle=p.isMaybeSingle,this.fetch=p.fetch?p.fetch:typeof fetch>"u"?L.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(p,m){return this.headers=Object.assign({},this.headers),this.headers[p]=m,this}then(p,m){var w=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let P=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var R=d(function*(I){var K,Q,Z;let D=null,G=null,Ee=null,ge=I.status,le=I.statusText;if(I.ok){if("HEAD"!==w.method){const _e=yield I.text();""===_e||(G="text/csv"===w.headers.Accept||w.headers.Accept&&w.headers.Accept.includes("application/vnd.pgrst.plan+text")?_e:JSON.parse(_e))}const pe=null===(K=w.headers.Prefer)||void 0===K?void 0:K.match(/count=(exact|planned|estimated)/),ue=null===(Q=I.headers.get("content-range"))||void 0===Q?void 0:Q.split("/");pe&&ue&&ue.length>1&&(Ee=parseInt(ue[1])),w.isMaybeSingle&&"GET"===w.method&&Array.isArray(G)&&(G.length>1?(D={code:"PGRST116",details:`Results contain ${G.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},G=null,Ee=null,ge=406,le="Not Acceptable"):G=1===G.length?G[0]:null)}else{const pe=yield I.text();try{D=JSON.parse(pe),Array.isArray(D)&&404===I.status&&(G=[],D=null,ge=200,le="OK")}catch{404===I.status&&""===pe?(ge=204,le="No Content"):D={message:pe}}if(D&&w.isMaybeSingle&&!(null===(Z=null==D?void 0:D.details)||void 0===Z)&&Z.includes("0 rows")&&(D=null,ge=200,le="OK"),D&&w.shouldThrowOnError)throw new x.default(D)}return{error:D,data:G,count:Ee,status:ge,statusText:le}});return function(I){return R.apply(this,arguments)}}());return this.shouldThrowOnError||(P=P.catch(R=>{var I,K,Q;return{error:{message:`${null!==(I=null==R?void 0:R.name)&&void 0!==I?I:"FetchError"}: ${null==R?void 0:R.message}`,details:`${null!==(K=null==R?void 0:R.stack)&&void 0!==K?K:""}`,hint:"",code:`${null!==(Q=null==R?void 0:R.code)&&void 0!==Q?Q:""}`},data:null,count:null,status:0,statusText:""}})),P.then(p,m)}returns(){return this}overrideTypes(){return this}}},8666:function(W,b,A){"use strict";var d=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(b,"__esModule",{value:!0});const j=d(A(3608));b.default=class L{constructor(f,{headers:g={},schema:p,fetch:m}){this.url=f,this.headers=g,this.schema=p,this.fetch=m}select(f,{head:g=!1,count:p}={}){const m=g?"HEAD":"GET";let w=!1;const $=(null!=f?f:"*").split("").map(P=>/\s/.test(P)&&!w?"":('"'===P&&(w=!w),P)).join("");return this.url.searchParams.set("select",$),p&&(this.headers.Prefer=`count=${p}`),new j.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(f,{count:g,defaultToNull:p=!0}={}){const w=[];if(this.headers.Prefer&&w.push(this.headers.Prefer),g&&w.push(`count=${g}`),p||w.push("missing=default"),this.headers.Prefer=w.join(","),Array.isArray(f)){const $=f.reduce((P,R)=>P.concat(Object.keys(R)),[]);if($.length>0){const P=[...new Set($)].map(R=>`"${R}"`);this.url.searchParams.set("columns",P.join(","))}}return new j.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:f,fetch:this.fetch,allowEmpty:!1})}upsert(f,{onConflict:g,ignoreDuplicates:p=!1,count:m,defaultToNull:w=!0}={}){const P=[`resolution=${p?"ignore":"merge"}-duplicates`];if(void 0!==g&&this.url.searchParams.set("on_conflict",g),this.headers.Prefer&&P.push(this.headers.Prefer),m&&P.push(`count=${m}`),w||P.push("missing=default"),this.headers.Prefer=P.join(","),Array.isArray(f)){const R=f.reduce((I,K)=>I.concat(Object.keys(K)),[]);if(R.length>0){const I=[...new Set(R)].map(K=>`"${K}"`);this.url.searchParams.set("columns",I.join(","))}}return new j.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:f,fetch:this.fetch,allowEmpty:!1})}update(f,{count:g}={}){const m=[];return this.headers.Prefer&&m.push(this.headers.Prefer),g&&m.push(`count=${g}`),this.headers.Prefer=m.join(","),new j.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:f,fetch:this.fetch,allowEmpty:!1})}delete({count:f}={}){const p=[];return f&&p.push(`count=${f}`),this.headers.Prefer&&p.unshift(this.headers.Prefer),this.headers.Prefer=p.join(","),new j.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},9293:W=>{function b(d,j,L,x,f,g,p){try{var m=d[g](p),w=m.value}catch($){return void L($)}m.done?j(w):Promise.resolve(w).then(x,f)}W.exports=function A(d){return function(){var j=this,L=arguments;return new Promise(function(x,f){var g=d.apply(j,L);function p(w){b(g,x,f,p,m,"next",w)}function m(w){b(g,x,f,p,m,"throw",w)}p(void 0)})}},W.exports.__esModule=!0,W.exports.default=W.exports}}]);